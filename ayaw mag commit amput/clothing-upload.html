<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clothing Image Upload</title>
    <link rel="stylesheet" href="clothing-upload.css">

    <!-- Firebase SDK -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
      import { getStorage, ref, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-storage.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyC9M4qMHf6dx1nXe9vdF6JtglKCELwFP3Y",
        authDomain: "virtual-try-on-f88a7.firebaseapp.com",
        projectId: "virtual-try-on-f88a7",
        storageBucket: "virtual-try-on-f88a7.appspot.com",
        messagingSenderId: "399099224495",
        appId: "1:399099224495:web:94202ec856116586464f5a",
        measurementId: "G-J0PKSRTPS0"
      };

      const app = initializeApp(firebaseConfig);
      const storage = getStorage(app);

      // Function to upload clothing image
      function uploadClothingImage() {
        const clothingInput = document.getElementById('clothingUpload');
        const file = clothingInput.files[0];

        if (!file) {
          alert('Please select a clothing image first.');
          return;
        }

        const storageRef = ref(storage, 'clothing_images/' + file.name);
        const uploadTask = uploadBytesResumable(storageRef, file);

        uploadTask.on('state_changed',
          (snapshot) => {
            // Progress can be displayed if desired
          },
          (error) => {
            alert('Upload failed: ' + error);
          },
          () => {
            getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {
              alert('Upload successful! Download URL: ' + downloadURL);
              const clothingImage = document.getElementById('clothingImage');
              clothingImage.src = downloadURL;
              clothingImage.style.display = 'block';
            });
          }
        );
      }

      window.uploadClothingImage = uploadClothingImage;
    </script>
</head>
<body>

<h2>Upload Your Clothing Image</h2>
<div class="container">
    <img id="userImage" src="" alt="User Image">
    <img id="clothingImage" src="" alt="Clothing Image" draggable="false">
</div>

<div class="controls">
    <label for="userHeight">Enter your height (in cm):</label> 
    <input type="number" id="userHeight" placeholder="e.g. 160" min="0" step="0.1"> 

    <label for="clothingSize">Select clothing size:</label>
    <select id="clothingSize">
        <option value="small">Small (66cm x 46cm)</option>
        <option value="medium">Medium (70cm x 50cm)</option>
        <option value="large">Large (74cm x 54cm)</option>
    </select>

    <input type="file" id="clothingUpload" accept="image/*">
    <button onclick="uploadClothingImage()">Overlay Clothing</button>

    <p>No clothing image? Try one of these:</p>
    <div class="sample-images">
        <img src="Mga damit/t shirt.png" alt="Sample Clothing 1" class="sample" onclick="useSampleClothing('Mga damit/t shirt.png')">
        <img src="path/to/sample-clothing2.png" alt="Sample Clothing 2" class="sample" onclick="useSampleClothing('path/to/sample-clothing2.png')">
        <img src="path/to/sample-clothing3.png" alt="Sample Clothing 3" class="sample" onclick="useSampleClothing('path/to/sample-clothing3.png')">
    </div>
</div>

<script src="clothing-upload.js"></script>

</body>
</html>
